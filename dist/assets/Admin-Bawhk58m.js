import{d as z,n as L,r as c,o as Q,c as s,a as t,k as m,F as f,h as g,l as r,v as u,m as E,b as j,t as i,i as a,x as V,_ as q}from"./index-aoWYAbzc.js";const G={class:"admin-container"},H={class:"admin-content"},J={class:"admin-sidebar"},K={class:"admin-nav"},O=["onClick"],P={class:"admin-main"},R={key:0,class:"tab-content"},W={class:"club-form"},X={class:"form-group"},Y={class:"form-group"},Z={class:"form-group"},tt={class:"form-group"},et={key:1,class:"tab-content"},lt={class:"tab-header"},ot={class:"activities-list"},nt={class:"activity-info"},st={class:"activity-actions"},at=["onClick"],it=["onClick"],dt=["onClick"],rt={key:2,class:"tab-content"},ut={key:0,class:"signup-management"},ct={class:"signup-list"},vt={class:"user-info"},pt={class:"signup-info"},mt={class:"signup-actions"},_t=["onClick"],bt=["onClick"],yt={key:1},ft={key:0,class:"modal-overlay"},gt={class:"modal"},kt={class:"activity-form"},Ct={class:"form-group"},ht={class:"form-group"},xt={class:"form-group"},wt={class:"form-group"},Vt={class:"form-group"},Ut={class:"form-group"},At={class:"form-actions"},$t=z({__name:"Admin",setup(St){L();const U=[{id:"club-info",label:"社团信息"},{id:"activities",label:"活动管理"},{id:"signups",label:"报名管理"}],v=c("club-info"),_=c(!1),d=c({name:"",category:"academic",intro:"",contact:""}),n=c({title:"",description:"",activity_time:"",location:"",sign_up_deadline:"",max_people:0}),k=c([]),C=c([]),b=c(null);Q(async()=>{await A(),await y()});const A=async()=>{d.value={name:"计算机协会",category:"academic",intro:"致力于计算机技术学习和交流的社团",contact:"QQ群: 123456789"}},y=async()=>{try{k.value=[{id:"1",club_id:"1",title:"编程竞赛培训",description:"为编程竞赛准备的培训活动",activity_time:"2024-12-15T14:00:00",location:"计算机学院101",sign_up_deadline:"2024-12-14T23:59:59",max_people:50,status:"pending"}]}catch(o){console.error("加载活动失败:",o)}},$=async()=>{try{console.log("保存社团信息:",d.value),alert("社团信息保存成功！")}catch(o){console.error("保存失败:",o),alert("保存失败，请重试")}},S=async()=>{try{console.log("创建活动:",n.value),_.value=!1,alert("活动创建成功！"),await y()}catch(o){console.error("创建失败:",o),alert("创建失败，请重试")}},T=o=>{console.log("编辑活动:",o)},D=async o=>{b.value=o,v.value="signups";try{C.value=[{id:"1",activity_id:o.id,user_id:"1",form_data:{},check_in:!1,created_at:"2024-12-01T10:00:00",profiles:{username:"张三",college:"计算机学院",grade:"2022级"}}]}catch(e){console.error("加载报名名单失败:",e)}},F=async o=>{if(confirm("确定要删除这个活动吗？"))try{console.log("删除活动:",o),alert("活动删除成功！"),await y()}catch(e){console.error("删除失败:",e),alert("删除失败，请重试")}},M=async o=>{try{console.log("标记签到:",o),alert("签到成功！")}catch(e){console.error("签到失败:",e),alert("签到失败，请重试")}},I=o=>{console.log("查看报名详情:",o)},h=o=>new Date(o).toLocaleString("zh-CN"),N=o=>({pending:"待开始",ongoing:"进行中",completed:"已完成",cancelled:"已取消"})[o]||o;return(o,e)=>(a(),s("div",G,[e[28]||(e[28]=t("div",{class:"admin-header"},[t("h1",null,"社团管理后台"),t("p",null,"管理您的社团信息和活动")],-1)),t("div",H,[t("div",J,[t("nav",K,[(a(),s(f,null,g(U,l=>t("button",{key:l.id,class:V([{active:v.value===l.id},"nav-btn"]),onClick:p=>v.value=l.id},i(l.label),11,O)),64))])]),t("div",P,[v.value==="club-info"?(a(),s("div",R,[e[17]||(e[17]=t("h2",null,"社团信息管理",-1)),t("div",W,[t("div",X,[e[12]||(e[12]=t("label",null,"社团名称",-1)),r(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>d.value.name=l),type:"text",placeholder:"请输入社团名称"},null,512),[[u,d.value.name]])]),t("div",Y,[e[14]||(e[14]=t("label",null,"社团分类",-1)),r(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>d.value.category=l)},[...e[13]||(e[13]=[j('<option value="academic" data-v-1d174b32>学术类</option><option value="art" data-v-1d174b32>文艺类</option><option value="sports" data-v-1d174b32>体育类</option><option value="public_welfare" data-v-1d174b32>公益类</option><option value="other" data-v-1d174b32>其他</option>',5)])],512),[[E,d.value.category]])]),t("div",Z,[e[15]||(e[15]=t("label",null,"社团简介",-1)),r(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=l=>d.value.intro=l),placeholder:"请输入社团简介",rows:"4"},null,512),[[u,d.value.intro]])]),t("div",tt,[e[16]||(e[16]=t("label",null,"联系方式",-1)),r(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>d.value.contact=l),type:"text",placeholder:"请输入联系方式"},null,512),[[u,d.value.contact]])]),t("button",{onClick:$,class:"save-btn"},"保存信息")])])):m("",!0),v.value==="activities"?(a(),s("div",et,[t("div",lt,[e[18]||(e[18]=t("h2",null,"活动管理",-1)),t("button",{onClick:e[4]||(e[4]=l=>_.value=!0),class:"create-btn"},"创建新活动")]),t("div",ot,[(a(!0),s(f,null,g(k.value,l=>(a(),s("div",{key:l.id,class:"activity-item"},[t("div",nt,[t("h3",null,i(l.title),1),t("p",null,"时间: "+i(h(l.activity_time)),1),t("p",null,"地点: "+i(l.location),1),t("p",null,"状态: "+i(N(l.status)),1)]),t("div",st,[t("button",{onClick:p=>T(l),class:"edit-btn"},"编辑",8,at),t("button",{onClick:p=>D(l),class:"view-btn"},"查看报名",8,it),t("button",{onClick:p=>F(l.id),class:"delete-btn"},"删除",8,dt)])]))),128))])])):m("",!0),v.value==="signups"?(a(),s("div",rt,[e[20]||(e[20]=t("h2",null,"报名管理",-1)),b.value?(a(),s("div",ut,[t("h3",null,i(b.value.title)+" - 报名名单",1),t("div",ct,[(a(!0),s(f,null,g(C.value,l=>{var p,x,w;return a(),s("div",{key:l.id,class:"signup-item"},[t("div",vt,[t("strong",null,i((p=l.profiles)==null?void 0:p.username),1),t("span",null,i((x=l.profiles)==null?void 0:x.college)+" - "+i((w=l.profiles)==null?void 0:w.grade),1)]),t("div",pt,[t("span",null,"报名时间: "+i(h(l.created_at)),1),t("span",{class:V({checked:l.check_in})},i(l.check_in?"已签到":"未签到"),3)]),t("div",mt,[l.check_in?m("",!0):(a(),s("button",{key:0,onClick:B=>M(l.id),class:"checkin-btn"}," 标记签到 ",8,_t)),t("button",{onClick:B=>I(l),class:"view-btn"},"查看详情",8,bt)])])}),128))])])):(a(),s("div",yt,[...e[19]||(e[19]=[t("p",null,"请先选择一个活动查看报名名单",-1)])]))])):m("",!0)])]),_.value?(a(),s("div",ft,[t("div",gt,[e[27]||(e[27]=t("h3",null,"创建新活动",-1)),t("div",kt,[t("div",Ct,[e[21]||(e[21]=t("label",null,"活动标题",-1)),r(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>n.value.title=l),type:"text",placeholder:"请输入活动标题"},null,512),[[u,n.value.title]])]),t("div",ht,[e[22]||(e[22]=t("label",null,"活动描述",-1)),r(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=l=>n.value.description=l),placeholder:"请输入活动描述",rows:"4"},null,512),[[u,n.value.description]])]),t("div",xt,[e[23]||(e[23]=t("label",null,"活动时间",-1)),r(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>n.value.activity_time=l),type:"datetime-local"},null,512),[[u,n.value.activity_time]])]),t("div",wt,[e[24]||(e[24]=t("label",null,"活动地点",-1)),r(t("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>n.value.location=l),type:"text",placeholder:"请输入活动地点"},null,512),[[u,n.value.location]])]),t("div",Vt,[e[25]||(e[25]=t("label",null,"报名截止时间",-1)),r(t("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>n.value.sign_up_deadline=l),type:"datetime-local"},null,512),[[u,n.value.sign_up_deadline]])]),t("div",Ut,[e[26]||(e[26]=t("label",null,"最大报名人数",-1)),r(t("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>n.value.max_people=l),type:"number",placeholder:"0表示无限制"},null,512),[[u,n.value.max_people]])]),t("div",At,[t("button",{onClick:S,class:"save-btn"},"创建活动"),t("button",{onClick:e[11]||(e[11]=l=>_.value=!1),class:"cancel-btn"},"取消")])])])])):m("",!0)]))}}),Dt=q($t,[["__scopeId","data-v-1d174b32"]]);export{Dt as default};
